<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Solo Predictor Example Connection Code - Eigenvector Research Documentation Wiki</title>



    <link rel="stylesheet" href="load.css" media="screen" />        
  

<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href=""/>
<meta name="generator" content="MediaWiki 1.39.6"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="viewport" content="width=1000"/>
<link rel="icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Eigenvector Research Documentation Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://www.wiki.eigenvector.com/api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="Eigenvector Research Documentation Wiki Atom feed" href=""/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Solo_Predictor_Example_Connection_Code rootpage-Solo_Predictor_Example_Connection_Code skin-vector action-view skin-vector-legacy vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading"><a href="https://wiki.eigenvector.com/index.php?title=Solo_Predictor_Example_Connection_Code"><span class="mw-page-title-main">Solo Predictor Example Connection Code</span></a></h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Eigenvector Research Documentation Wiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Examples_using_HTTP"><span class="tocnumber">1</span> <span class="toctext">Examples using HTTP</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Matlab_–_HTTP_Connection"><span class="tocnumber">1.1</span> <span class="toctext">Matlab – HTTP Connection</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Java_–_HTTP_Connection"><span class="tocnumber">1.2</span> <span class="toctext">Java – HTTP Connection</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Python_–_HTTP_Connection"><span class="tocnumber">1.3</span> <span class="toctext">Python – HTTP Connection</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Web_Browser_-_HTTP_Connection"><span class="tocnumber">1.4</span> <span class="toctext">Web Browser - HTTP Connection</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Examples_using_Sockets"><span class="tocnumber">2</span> <span class="toctext">Examples using Sockets</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#C#_-_Socket_Connection"><span class="tocnumber">2.1</span> <span class="toctext">C# - Socket Connection</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Matlab_–_Socket_Connection"><span class="tocnumber">2.2</span> <span class="toctext">Matlab – Socket Connection</span></a></li>
</ul>
</li>
</ul>
</div>

<p>The following provides some standard code pieces which can be used to make connections to Solo_Predictor using HTTP (Hypertext Transfer Protocol) requests or low-level sockets directly. These examples may not be appropriate for all applications (e.g. none of these examples are asynchronous calls. They all 'block' the program execution until Solo_Predictor returns a result.) In addition, additional error checking and input/output parsing is required in most cases.
</p>
<h2><span class="mw-headline" id="Examples_using_HTTP">Examples using HTTP</span></h2>
<h3><span id="Matlab_.E2.80.93_HTTP_Connection"></span><span class="mw-headline" id="Matlab_–_HTTP_Connection">Matlab – HTTP Connection</span></h3>
<p>Matlab script demonstrating how a client program can communicate with Solo_Predictor (acting as the server) using the HTTP protocol. The script sends a message and retrieve the response. HTTP client code is much simpler than the sockets examples shown below.
</p>
<pre>% Load and view a data file
msg = 'input=''C:/eigenu_dm/datafolder/spectrum1.spc'';:xml;input;';    

% Create the request string     
serverIPAddress  = '127.0.0.1';
serverPort       = '2211';
httpstr          = ['http://', serverIPAddress, ':', serverPort, '/?'];
httpURL          = sprintf('http://%s:%s/?%s', serverIPAddress, serverPort, urlencode(msg));

% Make HTTP request and read response as text  
webData = webread(httpURL);

disp(sprintf('Response is: \n%s\n', webData));
</pre>
<h3><span id="Java_.E2.80.93_HTTP_Connection"></span><span class="mw-headline" id="Java_–_HTTP_Connection">Java – HTTP Connection</span></h3>
<p>Here is an example in Java demonstrating how a client program can communicate with Solo_Predictor (acting as the server) using the HTTP protocol. The program sends a message and retrieves the response using the java.net.HttpURLConnection class.
</p>
<pre>package sp_client;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;
import java.nio.charset.StandardCharsets;

public class HttpClient {
	private final String USER_AGENT = "Mozilla/5.0";

	// HTTP GET request
	private void sendGet() throws Exception {

		String url = "http://127.0.0.1:2211/?:version";
		String msg = ":plain;data=\'C:/Proj1/datafolder/spectrum1.spc\';"
				   + "model = \'C:/Proj1/modelfolder/plsmodel.mat\';"
				   + "pred = data | model;pred.prediction;";
		msg = URLEncoder.encode(msg, StandardCharsets.UTF_8.toString());
		url = "http://127.0.0.1:2211/?" + msg;

		URL obj = new URL(url);
		HttpURLConnection con = (HttpURLConnection) obj.openConnection();

		// optional default is GET
		con.setRequestMethod("GET");
		//add request header
		con.setRequestProperty("User-Agent", USER_AGENT);

		int responseCode = con.getResponseCode();
		System.out.println("\nSending 'GET' request to URL&#160;: " + url);
		System.out.println("Response Code&#160;: " + responseCode);

		BufferedReader in = new BufferedReader(
				new InputStreamReader(con.getInputStream()));
		String inputLine;
		StringBuffer response = new StringBuffer();

		while ((inputLine = in.readLine())&#160;!= null) {
			response.append(inputLine);
		}
		in.close();

		//print result
		System.out.println(response.toString());
	}

	public static void main(String[] args) throws Exception {
		HttpClient http = new HttpClient();

		// Send Http GET request
		http.sendGet();
	}
}
</pre>
<h3><span id="Python_.E2.80.93_HTTP_Connection"></span><span class="mw-headline" id="Python_–_HTTP_Connection">Python – HTTP Connection</span></h3>
<p>An example in Python demonstrating how a client program can communicate with Solo_Predictor (acting as the server) using the HTTP protocol. The program sends a message and retrieves the response using the Python "requests" library.
</p>
<pre>import requests

#r = requests.get('http://127.0.0.1:2211/?:version')    # simple test of connectivity
r = requests.get('http://127.0.0.1:2211/?:plain; data = \'C:/Proj1/datafolder/spectrum1.spc\';model = \'C:/Proj1/modelfolder/plsmodel.mat\'; pred = data | model; pred.prediction;')

print('status_code = ', r.status_code)

prediction_result = r.text    # reads content of the response, which should be 20.18080
</pre>
<h3><span class="mw-headline" id="Web_Browser_-_HTTP_Connection">Web Browser - HTTP Connection</span></h3>
<p>Finally, the same HTTP request can be conveniently sent from a web browser, for example Firefox or Chrome, using the URL:
</p>
<pre>:xml;data = 'C:/Proj1/datafolder/spectrum1.spc';model = 'C:/Proj1/modelfolder/plsmodel.mat'; pred = data | model; pred.prediction;
</pre>
<p>The error status is also included in the response and will include an error message if an error occurred. This can be a very convenient means of quickly testing a command.
</p>
<h2><span class="mw-headline" id="Examples_using_Sockets">Examples using Sockets</span></h2>
<h3><span id="C.23_-_Socket_Connection"></span><span class="mw-headline" id="C#_-_Socket_Connection">C# - Socket Connection</span></h3>
<p>The example code expects three variables: ServerIP as a string indicating the server's IP address, Port as an integer giving the server's port number, and command as a string command to send. It returns Solo_Predictor's output in a variable called outputString. This code requires the following "using" declarations:
</p>
<pre>using System;
using System.Net.Sockets;
using System.ComponentModel;
</pre>
<p>Note that no object or function declarations are given in this code but would generally be required. This function also sets the ReceiveTimeout property on the socket to 2000 milliseconds. This setting can be adjusted as required by the application. The total time of most calls to Solo_Predict is 1/2 second or less (testing application of a PLS model to a 200 point vector took an average of 0.2 seconds including I/O overhead.)
</p>
<pre>TcpClient socketForServer;
try
{
  //make connection to server
  socketForServer = new TcpClient(ServerIP,Port);
}
catch
{
  outputString  = "ERROR: Failed to connect to server";
  return;
}
//get stream and stream reader/writer
NetworkStream networkStream = socketForServer.GetStream();
System.IO.StreamReader streamReader = new System.IO.StreamReader(networkStream);
System.IO.StreamWriter streamWriter = new System.IO.StreamWriter(networkStream);
 
try
{
  //send command to server
  streamWriter.WriteLine(command);
  streamWriter.Flush();
  //wait for and retrieve response
  string outputString;
  socketForServer.ReceiveTimeout = 2000;
  outputString = streamReader.ReadToEnd();
}
catch
{
  outputString = "ERROR: Exception reading from Server";
}
networkStream.Close();  // tidy up
</pre>
<h3><span id="Matlab_.E2.80.93_Socket_Connection"></span><span class="mw-headline" id="Matlab_–_Socket_Connection">Matlab – Socket Connection</span></h3>
<p>This code example runs in Matlab and makes use of Java commands to create a socket connection, send a message, and retrieve the response. It assumes that an input message exists in the variable msg as a string command to send and the server ip and port are in the variables srv and port.
</p>
<pre>import java.io.*;
import java.net.*;

% Example of how to set parameters. The msg command simply retrieves the loaded dataset in this simple example.
% srv  = java.lang.String('127.0.0.1');
% port = 2211;
% msg  = 'input=''C:\Data\proj1\spectrum1.spc'';:xml;input;';

%Create socket connection and socket reader and writers
clientSocket = java.net.Socket(srv,port);
iStream_client = clientSocket.getInputStream;
iReader_client = InputStreamReader(iStream_client);
outStream_client = clientSocket.getOutputStream;

%create buffers for socket
clientOut = PrintWriter(outStream_client, true);
clientIn = BufferedReader(iReader_client);

%send message to Solo_Predictor
clientOut.println(java.lang.String(msg));
clientOut.flush;

%wait for reply ready
starttime = now;
while ~clientIn.ready
  if (now-starttime)&gt;60/60/60/24;
    error('No response from server')
  end
end

%read in reply and store in cell array
rcv = {};
while clientIn.ready;
  rcv{end+1} = char(readLine(clientIn));
end

%concatenate string reply with linefeeds
if length(rcv)&gt;1;
  rcv = sprintf('%s\n',rcv{:});
else
  rcv = rcv{1};
end
</pre>
<!-- 
NewPP limit report
Cached time: 20240930151809
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.006 seconds
Real time usage: 0.008 seconds
Preprocessor visited node count: 52/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 4553/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key newwiki_eigenvector_com:pcache:idhash:607-0!canonical and timestamp 20240930151809 and revision id 11688.
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://www.wiki.eigenvector.com/index.php?title=Solo_Predictor_Example_Connection_Code&amp;oldid=11688">https://www.wiki.eigenvector.com/index.php?title=Solo_Predictor_Example_Connection_Code&amp;oldid=11688</a>"</div></div>
		<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		

<nav id="p-personal" class="vector-menu mw-portlet mw-portlet-personal vector-user-menu-legacy" aria-labelledby="p-personal-label" role="navigation"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			

<nav id="p-namespaces" class="vector-menu mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-namespaces-label" role="navigation"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			

<nav id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	/>
	<label
		id="p-variants-label"
		 aria-label="Change language variant"
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			

<nav id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-views-label" role="navigation"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href=""><span>Read</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	/>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			

		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="main_page.html"
			title="Visit the main page"></a>
	</div>
	

<nav id="p-navigation" class="vector-menu mw-portlet mw-portlet-navigation vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Main-Page" class="mw-list-item"><a href="main_page.html"><span>Main Page</span></a></li><li id="n-PLS_Toolbox/Solo" class="mw-list-item"><a href="software_user_guide.html"><span>PLS_Toolbox/Solo</span></a></li><li id="n-MIA_Toolbox/Solo+MIA" class="mw-list-item"><a href="mia_toolbox_user_guide.html"><span>MIA_Toolbox/Solo+MIA</span></a></li><li id="n-Solo_Predictor" class="mw-list-item"><a href="solo_predictor_user_guide.html"><span>Solo_Predictor</span></a></li><li id="n-Model_Exporter" class="mw-list-item"><a href="model_exporter_user_guide.html"><span>Model_Exporter</span></a></li><li id="n-DataSet-Object" class="mw-list-item"><a href="dataset_object.html"><span>DataSet Object</span></a></li><li id="n-Frequently-Asked-Questions" class="mw-list-item"><a href="evri_faq.html"><span>Frequently Asked Questions</span></a></li><li id="n-Eigenvector-Homepage" class="mw-list-item"><a href="http://www.eigenvector.com/" rel="nofollow"><span>Eigenvector Homepage</span></a></li><li id="n-MediaWiki-Help" class="mw-list-item"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents"><span>MediaWiki Help</span></a></li></ul>
		
	</div>
</nav>

	

<nav id="p-tb" class="vector-menu mw-portlet mw-portlet-tb vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="" title="More information about this page"><span>Page information</span></a></li></ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 23 September 2022, at 15:17.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="eigenvector_research_documentation_wiki_privacy_policy.html">Privacy policy</a></li>
	<li id="footer-places-about"><a href="eigenvector_research_documentation_wiki_about.html">About Eigenvector Research Documentation Wiki</a></li>
	<li id="footer-places-disclaimer"><a href="eigenvector_research_documentation_wiki_general_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></li>
</ul>

</footer>


<br/></body>
</html>