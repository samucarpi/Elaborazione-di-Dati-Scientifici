<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>SpectraQuant Filtering - Eigenvector Research Documentation Wiki</title>



    <link rel="stylesheet" href="load.css" media="screen" />        
  

<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href=""/>
<meta name="generator" content="MediaWiki 1.39.6"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="viewport" content="width=1000"/>
<link rel="icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Eigenvector Research Documentation Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://www.wiki.eigenvector.com/api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="Eigenvector Research Documentation Wiki Atom feed" href=""/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-SpectraQuant_Filtering rootpage-SpectraQuant_Filtering skin-vector action-view skin-vector-legacy vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading"><a href="https://wiki.eigenvector.com/index.php?title=SpectraQuant_Filtering"><span class="mw-page-title-main">SpectraQuant Filtering</span></a></h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Eigenvector Research Documentation Wiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#SpectraQuant_Filtering_Panel"><span class="tocnumber">1</span> <span class="toctext">SpectraQuant Filtering Panel</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Correction_Spectra"><span class="tocnumber">2</span> <span class="toctext">Correction Spectra</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Adding_Correction_Spectra"><span class="tocnumber">2.1</span> <span class="toctext">Adding Correction Spectra</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Removing_Correction_Spectra"><span class="tocnumber">2.2</span> <span class="toctext">Removing Correction Spectra</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Choosing_Number_of_Factors"><span class="tocnumber">2.3</span> <span class="toctext">Choosing Number of Factors</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Viewing_the_Correction_Spectra"><span class="tocnumber">2.4</span> <span class="toctext">Viewing the Correction Spectra</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Regions/Baselines"><span class="tocnumber">3</span> <span class="toctext">Regions/Baselines</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Adding_Regions_and_Baselines"><span class="tocnumber">3.1</span> <span class="toctext">Adding Regions and Baselines</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Removing_Regions"><span class="tocnumber">3.2</span> <span class="toctext">Removing Regions</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Thickness_Correction"><span class="tocnumber">4</span> <span class="toctext">Thickness Correction</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Force_PC80_Compatible_Preprocessing"><span class="tocnumber">5</span> <span class="toctext">Force PC80 Compatible Preprocessing</span></a></li>
</ul>
</div>

<p>SpectraQuant Filtering is a preprocessing method used to remove interferences from data prior to building a regression model. The SpectraQuant filter includes one or more of the following corrections:
</p>
<ol><li>multivariate filtering of components defined by a set of clutter or "correction" spectra.</li>
<li>detrending (aka baselining) of the input data in windows of variables.</li>
<li>an integrated thickness/pathlength correction.</li></ol>
<h2><span class="mw-headline" id="SpectraQuant_Filtering_Panel">SpectraQuant Filtering Panel</span></h2>
<p>The SpectraQuant Filtering tools are accessed through the SpectraQuant Filtering panel of Analysis GUI (click on the "Filter Settings" button just below the top status panel). The filter settings panel is only available when using the PCR or PLS Analysis methods and only enabled when calibration data has already been loaded. The default settings for the panel are shown below.
</p><p><a href="" class="image"><img alt="Cpsa panel empty.png" src="cpsa_panel_empty.png" decoding="async" width="511" height="346" /></a>
</p><p><br />
Four different options categories are available on the panel:
</p>
<ul><li><b><a href="#Correction_Spectra" title="SpectraQuant Filtering"> Correction Spectra</a></b> - Allows selecting correction spectra which describe background components which should be removed from the spectra prior to analysis.</li></ul>
<ul><li><b><a href="#Regions.2FBaselines" title="SpectraQuant Filtering"> Regions/Baselines</a></b> - Defines regions of the spectra and the baseline order to apply to each region.</li></ul>
<ul><li><b><a href="#Thickness_Correction" title="SpectraQuant Filtering"> Thickness Correction</a></b> - Determines whether or not to use thickness/pathlength correction (requires thickness/pathlength reference in calibration data)</li></ul>
<ul><li><b><a href="#Force_PC80_Compatible_Preprocessing" title="SpectraQuant Filtering"> Force PC80 Compatible Preprocessing</a></b> - Determines whether to enforce strict preprocessing rules on the created model.</li></ul>
<h2><span class="mw-headline" id="Correction_Spectra">Correction Spectra</span></h2>
<p>The list on the left of this option shows the file(s) which have been selected by the user as correction spectra (aka background or clutter spectra) which should be removed from all calibration and test spectra. To perform the filter, the correction spectra are first decomposed using a Principal Component Analysis (PCA) model containing a user-specified number of principal components or "factors". The resulting factors are then used as the filter.
</p><p>If no correction spectra are loaded, no background removal will occur, but all other filter steps (see other options) will still be completed.
</p>
<h3><span class="mw-headline" id="Adding_Correction_Spectra">Adding Correction Spectra</span></h3>
<p>To add correction spectra to the filter, click on the <b>Add</b> button and select the file type to read (e.g. "AIT ASF files") and click OK. 
</p><p>Browse to the folder containing the file(s) to load, select one or more files (using shift-click or control-click to select multiple files), and click "Open".
</p><p>The files will be loaded and added to the list. You will be advised if the spectral axis of the loaded files appears to be incompatible with the currently loaded x-block data. Any incompatible spectra will not be loaded.
</p><p><a href="" class="image"><img alt="Cpsa correction loaded.png" src="cpsa_correction_loaded.png" decoding="async" width="372" height="205" /></a>
</p>
<h3><span class="mw-headline" id="Removing_Correction_Spectra">Removing Correction Spectra</span></h3>
<p>Any file that has been loaded as a correction spectrum can be removed from the filter by simply clicking on the filename in the list on the left, and then clicking on the <b>Remove</b> button. The file will be discarded. Note that after discarding any spectra from the filter, any currently-loaded model will be cleared and have to be recalculated because the filter has now changed and the model is no longer current.
</p>
<h3><span class="mw-headline" id="Choosing_Number_of_Factors">Choosing Number of Factors</span></h3>
<p>The SpectraQuant filter calculates a PCA model from the correction spectra and keeps some number of factors. The edit box on the right of the control specifies the number of factors to use in the filter. The higher the number, the more degrees of freedom the filter will remove (and the increased chance of removing useful signal). In general, a lower number of factors is recommended unless the filter is not performing sufficiently for a given application.
</p>
<h3><span class="mw-headline" id="Viewing_the_Correction_Spectra">Viewing the Correction Spectra</span></h3>
<p>The selected correction spectra can be viewed in a plot by clicking the <b>Plot</b> button. The spectra selected on the left will be displayed, but all loaded correction spectra can be viewed using the Plot Controls which will appear along with the plot of the spectra. Regions of these spectra can be excluded using the Select button and Edit/Exclude or Include menu options in the Plot Controls.
</p>
<h2><span id="Regions.2FBaselines"></span><span class="mw-headline" id="Regions/Baselines">Regions/Baselines</span></h2>
<p>By default, all spectral regions marked as "included" in the X-block data will be used in the calibration model. However, the Regions/Baselines option of the filter settings panel allows selection of specific spectral sub-regions to include (and, conversely, to discard other regions). In addition, the selected sub-regions can be detrended (i.e. baselined across the entire selected region).
</p><p>To select one or more specific sub-regions, click the <b>Edit</b> button next to the Regions/Baselines option on the filter settings panel. This will bring up the Regions and Baselines GUI. Initially, no regions will be selected and you will see the mean of all the calibration spectra and an empty table at the bottom of the GUI (see figure below.) Note that all changes within the Regions and Baselines GUI take effect immediately.
</p><p>If you want to view a specific spectrum or spectra in the calibration data instead of the mean, select the Plot/Rows menu item in the Plot Controls, then select the spectrum/spectra to view in the Plot Controls.
</p><p><a href="" class="image"><img alt="Cpsa regions empty.png" src="cpsa_regions_empty.png" decoding="async" width="508" height="487" /></a>
</p><p>The toolbar on this figure provides several options:
</p><p><a href="" class="image"><img alt="Cpsa regions toolbar.png" src="cpsa_regions_toolbar.png" decoding="async" width="148" height="29" /></a>
</p>
<ul><li>Folder Icon - import regions and baselines from a CPSA32 .cri file</li>
<li>[+] Icon - add a new region (click and drag)</li>
<li>[-] Icon - remove the region currently selected in the table at the bottom of the GUI</li>
<li>Double-arrow Icon - reverse the x-axis direction</li>
<li>Check Mark Icon - accept the current regions and close the GUI</li></ul>
<h3><span class="mw-headline" id="Adding_Regions_and_Baselines">Adding Regions and Baselines</span></h3>
<p>To begin selecting regions, either enter the starting and ending frequencies in an empty line in the table at the bottom of the GUI or click the [+] toolbar button and click-and-drag a new region on the interface. In the figure below, the user has manually entered a starting and ending value creating the first region (shown as shaded blue region in the plot.)
</p><p><a href="" class="image"><img alt="Cpsa regions first.png" src="cpsa_regions_first.png" decoding="async" width="507" height="326" /></a>
</p><p>Once created, regions can be edited by either directly editing the values in the table, or by clicking and dragging the dark region markers on the left and right edges of each region in the plot.
</p><p>In addition to specifying the included spectral range, the table also allows specifying the order of baseline polynomial to use and the grouping of regions (Note that although the terminology here is "baseline", the calculation is, in fact, a "detrend" in which the polynomial is fit to the entire range of windowed intensities.)
</p><p>Grouping of regions requires that separate regions be fit with a single set of baseline polynomials. Normally, each region's baseline is fit independently. When regions are grouped, a single set of polynomial functions is simultaneously fit to all regions in the group. Note that all regions in a group will be forced to use the same polynomial order. To group two or more regions, simply change the "group #" for each region to the same value. Regions will automatically be colored the same (to indicate they are grouped) and the polynomial orders "linked".
</p><p>Grouping regions effectively allows the creation of a "gap" around an unwanted feature in a single region because two regions which span the unwanted feature can be grouped making them act as one.
</p><p>In the example above, the specified window will be baselined using a 2nd order (Quadratic) polynomial. Since there is only one region, no grouping can be done.
</p>
<h3><span class="mw-headline" id="Removing_Regions">Removing Regions</span></h3>
<p>To remove a region, either select the corresponding row in the table at the bottom of the GUI and press the [-] toolbar button, or right-click the region and select <b>Remove Region</b> from the context menu. In the example below, the green region has been right-clicked giving the Remove Region context menu.
</p><p><a href="" class="image"><img alt="Cpsa regions delete.png" src="cpsa_regions_delete.png" decoding="async" width="466" height="265" /></a>
</p>
<h2><span class="mw-headline" id="Thickness_Correction">Thickness Correction</span></h2>
<p>The thickness / pathlength correction option allows automatic detection and correction of pathlength errors. To make this correction, the calibration data must be loaded with pathlength values in the sample axisscale of the X-block (note that the name of the axisscale must be "pathlength"). The values supplied will be used to calculate a correction model which, when applied to future data, will attempt to correct any pathlength variations detected in that data.
</p><p>To enable this feature, check the Use Thickness Correction checkbox. If no pathlength data was supplied with the calibration X-block spectra, you will be prompted to specify a default value to assign to all spectra. These default values, or any values supplied when importing the spectra, can be modified by clicking the <b>Edit</b> button to the right of this option. 
</p><p>Editing the pathlength will open a DataSet editor for the X-block with the Row Labels tab selected. The Axis Scale column of this interface contains the pathlength values. These values can be manually corrected, or copied and/or pasted from another application. To copy the current values or paste in new values, click on the <b>Axis Scale</b> button at the top of the interface, then select the menu: Edit/Copy or Edit/Paste. All changes in the DataSet editor take effect immediately.
</p><p>Uncheck the Use Thickness Correction checkbox to disable the thickness correction feature.
</p>
<h2><span class="mw-headline" id="Force_PC80_Compatible_Preprocessing">Force PC80 Compatible Preprocessing</span></h2>
<p>If this option is unchecked, the user may use any preprocessing available in the custom preprocessing interface. The model created will be compatible with Eigenvector Research software such as Solo_Predictor, Solo, and PLS_Toolbox but may not be compatible with the AIT  PC80 and CPSA32 applications. 
</p><p>When checked, the preprocessing selected in the pull-down menu to the right of the option (including: None, Mean Centering, Autoscaling) will be used and any other preprocessing manually selected from the Custom preprocessing GUI or the preprocessing menus will be removed. This mode assures that the model created will be as compatible as possible with the PC80 and CPSA32 applications.
</p>
<!-- 
NewPP limit report
Cached time: 20240930205751
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.029 seconds
Real time usage: 0.034 seconds
Preprocessor visited node count: 43/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key newwiki_eigenvector_com:pcache:idhash:615-0!canonical and timestamp 20240930205751 and revision id 5195.
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://www.wiki.eigenvector.com/index.php?title=SpectraQuant_Filtering&amp;oldid=5195">https://www.wiki.eigenvector.com/index.php?title=SpectraQuant_Filtering&amp;oldid=5195</a>"</div></div>
		<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		

<nav id="p-personal" class="vector-menu mw-portlet mw-portlet-personal vector-user-menu-legacy" aria-labelledby="p-personal-label" role="navigation"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			

<nav id="p-namespaces" class="vector-menu mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-namespaces-label" role="navigation"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			

<nav id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	/>
	<label
		id="p-variants-label"
		 aria-label="Change language variant"
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			

<nav id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-views-label" role="navigation"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href=""><span>Read</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	/>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			

		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="main_page.html"
			title="Visit the main page"></a>
	</div>
	

<nav id="p-navigation" class="vector-menu mw-portlet mw-portlet-navigation vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Main-Page" class="mw-list-item"><a href="main_page.html"><span>Main Page</span></a></li><li id="n-PLS_Toolbox/Solo" class="mw-list-item"><a href="software_user_guide.html"><span>PLS_Toolbox/Solo</span></a></li><li id="n-MIA_Toolbox/Solo+MIA" class="mw-list-item"><a href="mia_toolbox_user_guide.html"><span>MIA_Toolbox/Solo+MIA</span></a></li><li id="n-Solo_Predictor" class="mw-list-item"><a href="solo_predictor_user_guide.html"><span>Solo_Predictor</span></a></li><li id="n-Model_Exporter" class="mw-list-item"><a href="model_exporter_user_guide.html"><span>Model_Exporter</span></a></li><li id="n-DataSet-Object" class="mw-list-item"><a href="dataset_object.html"><span>DataSet Object</span></a></li><li id="n-Frequently-Asked-Questions" class="mw-list-item"><a href="evri_faq.html"><span>Frequently Asked Questions</span></a></li><li id="n-Eigenvector-Homepage" class="mw-list-item"><a href="http://www.eigenvector.com/" rel="nofollow"><span>Eigenvector Homepage</span></a></li><li id="n-MediaWiki-Help" class="mw-list-item"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents"><span>MediaWiki Help</span></a></li></ul>
		
	</div>
</nav>

	

<nav id="p-tb" class="vector-menu mw-portlet mw-portlet-tb vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="" title="More information about this page"><span>Page information</span></a></li></ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 26 April 2012, at 10:36.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="eigenvector_research_documentation_wiki_privacy_policy.html">Privacy policy</a></li>
	<li id="footer-places-about"><a href="eigenvector_research_documentation_wiki_about.html">About Eigenvector Research Documentation Wiki</a></li>
	<li id="footer-places-disclaimer"><a href="eigenvector_research_documentation_wiki_general_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></li>
</ul>

</footer>


<br/></body>
</html>