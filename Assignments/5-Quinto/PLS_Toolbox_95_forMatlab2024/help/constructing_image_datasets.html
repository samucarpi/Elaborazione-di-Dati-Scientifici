<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Constructing Image DataSets - Eigenvector Research Documentation Wiki</title>



    <link rel="stylesheet" href="load.css" media="screen" />        
  

<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href=""/>
<meta name="generator" content="MediaWiki 1.39.6"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="viewport" content="width=1000"/>
<link rel="icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Eigenvector Research Documentation Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://www.wiki.eigenvector.com/api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="Eigenvector Research Documentation Wiki Atom feed" href=""/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Constructing_Image_DataSets rootpage-Constructing_Image_DataSets skin-vector action-view skin-vector-legacy vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading"><a href="https://wiki.eigenvector.com/index.php?title=Constructing_Image_DataSets"><span class="mw-page-title-main">Constructing Image DataSets</span></a></h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Eigenvector Research Documentation Wiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Getting_Started"><span class="tocnumber">1</span> <span class="toctext">Getting Started</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#From_a_GUI"><span class="tocnumber">2</span> <span class="toctext">From a GUI</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Converting_an_Existing_DataSet"><span class="tocnumber">3</span> <span class="toctext">Converting an Existing DataSet</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#From_the_MATLAB_Command_Line"><span class="tocnumber">4</span> <span class="toctext">From the MATLAB Command Line</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Concatenating_Images"><span class="tocnumber">5</span> <span class="toctext">Concatenating Images</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Visual_explanation_of_Image_Domain_Concatenation"><span class="tocnumber">5.1</span> <span class="toctext">Visual explanation of Image Domain Concatenation</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Visual_explanation_of_Variable_Domain_Concatenation"><span class="tocnumber">5.2</span> <span class="toctext">Visual explanation of Variable Domain Concatenation</span></a></li>
</ul>
</li>
</ul>
</div>

<p>Building image DSOs can be accomplished via a GUI in Solo+MIA or PLS_Toolbox and MIA_Toolbox, or from the MATLAB command line when using PLS_Toolbox and MIA_Toolbox. A list of available methods can be found <a href="image_importing_formats.html" title="Image Importing Formats">here</a>.
</p>
<h2><span class="mw-headline" id="Getting_Started">Getting Started</span></h2>
<p>In general, <a href="imagetypes.html" title="ImageTypes">images</a> are stored "unfolded" in an image DataSet where all spacial dimensions are unfolded into mode 1 and variables are unfolded into mode 2. You can retrieve a "folded" image from an image DataSet using the <a href="dataset_object_fields.html#.imagedata" title="DataSet Object Fields"> .imagedata</a> field.
</p><p><a href="" class="image" title="Unfolding Images"><img alt="Unfolding Images" src="unfold_image_graphic.png" decoding="async" width="702" height="404" /></a>
</p><p>In the code below you can see a simple example image of random data (3px by 2px by 3 slabs/channels as if RBG) is created. The <a href="buildimage.html" title="Buildimage">buildimage</a> function is called to create an image DataSet. Each slab is "unfolded" (column wise) to become a column of raw data. Note the .imagesize field indicates the original size of the image and thus how to "fold" the data back into an image.
</p>
<pre>&gt;&gt; a = rand(3,2,3)

a(:,:,1) =

    0.1605    0.2914
    0.7544    0.5076
    0.7935    0.2380


a(:,:,2) =

    0.1927    0.1959
    0.8087    0.9748
    0.0667    0.5751


a(:,:,3) =

    0.5832    0.8787
    0.9500    0.8915
    0.1000    0.2140

&gt;&gt; b = buildimage(a);
&gt;&gt; b.data

ans =

    0.1605    0.1927    0.5832
    0.7544    0.8087    0.9500
    0.7935    0.0667    0.1000
    0.2914    0.1959    0.8787
    0.5076    0.9748    0.8915
    0.2380    0.5751    0.2140

&gt;&gt; b.imagesize

ans =

     3     2
</pre>
<h2><span class="mw-headline" id="From_a_GUI">From a GUI</span></h2>
<p>When using Solo+MIA or when you have MIA_Toolbox installed with PLS_Toolbox, image importing options automatically become available from the File/Import menus. You'll notice extra selections in the Import menu for images: File/Import Data/X Block. In this example 
we’re loading the JPEG from above directly into <a href="analysis_gui.html" class="mw-redirect" title="Analysis GUI">Analysis GUI</a>.  
</p><p><br />
<a href="" class="image" title="Import Data List Box"><img alt="Import Data List Box" src="importmenu.jpg" decoding="async" width="392" height="435" /></a>
</p><p><br />
After you've selected the file you wish to import, you're prompted to specify what modes are spatial (m-by-n pixels) and which mode you'd like them unfolded to.  
</p><p><br />
<a href="" class="image" title="Image Load GUI"><img alt="Image Load GUI" src="imageloadgui.png" decoding="async" width="260" height="148" /></a>
</p><p><br />
Since the spatial data resides in the first two modes (768x512 pixels) we enter "1,2" in 
the Image Modes text box. Generally you put unfolded data into mode 1 of the new 
image dataset, so we'll use the default value of "1" in the Target Mode text box. Clicking 
OK loads the data into Analysis. 
</p><p>If you build a PCA model on this data you'll notice two things: an extra button on the 
toolbar, and different behavior when viewing data or scores.   
</p><p>The extra button opens the imagegui tool, see the MIA_Toolbox documentation for more 
information how imagegui works (or, if using PLS_Toolbox, type help imagegui at the command line). Also 
note that imagegui needs a model with at least 2 PCs calculated to be enabled.  
</p><p>Viewing data and scores will display information in its "folded", image form. In this 
example the 2 pc model scores plot displays in the original image spatial 
dimensions. 
</p><p><a href="" class="image" title="Scores Plot on Image"><img alt="Scores Plot on Image" src="cloudscores.jpg" decoding="async" width="560" height="421" /></a>
</p><p>Most methods in <a href="analysis_gui.html" class="mw-redirect" title="Analysis GUI">Analysis GUI</a> are image “enabled” in that they will automatically 
work on image data (PARAFAC will still operate on images but won't display "folded" image 
data). Be aware of size involved in image data. Large volumes of data will require 
extended amounts of time and memory to analyze. When a dataset is too large it will generate <a rel="nofollow" class="external text" href="http://software.eigenvector.com/faq/index.php?id=98%7C">out of memory errors</a>.
</p>
<h2><span class="mw-headline" id="Converting_an_Existing_DataSet">Converting an Existing DataSet</span></h2>
<p>If you have an existing DataSet that is already unfolded, you can transform it into an image DataSet by defining the image size. This can be done from the DataSet Editor Transform menu (<b>Transform&gt;Convert to/from Image</b>).
</p><p><a href="" class="image" title="Convert to Image menu."><img alt="Convert to Image menu." src="convertimagemenu.png" decoding="async" width="252" height="151" /></a>
</p><p>You will be prompted for information about the image. The first dialog box asks if the image is multivariate or univariate (<a href="imagetypes.html" title="ImageTypes"> get more information about image types here</a>). If you have a multivariate image you will then be prompted for the image size. This should be the size, in pixels of the original image. Once you've input the image size the function will then add this information to the DataSet and change it's type to "image".
</p>
<h2><span class="mw-headline" id="From_the_MATLAB_Command_Line">From the MATLAB Command Line</span></h2>
<p>With PLS_Toolbox and MIA_Toolbox, the easiest way to import an image via the command line is simply to use <tt>imageload</tt>. Calling imageload with no imputs will allow you to import and transform an image in the MATLAB workspace or from a .mat file.
</p>
<pre>imageload</pre>
<p>Calling imageload with "other" switch will allow you to import from a number of standard image file types (.tiff, .png, .hdf, .bmp, .jpeg, .gif):
</p>
<pre>imageload('other')</pre>
<p>The following example shows how to build up an image dataset "manually". It uses the EchoRidgeClouds.jpeg image from the MIA_Toolbox/dems folder. This JPEG image contains RGB (Truecolor) information of size N x M x 
3 where N and M are the pixel (spatial) dimensions. The following commands will load 
the image using the MATLAB image read command <tt>imread</tt> then unfold the image into the 
first mode of an image dataset using the <a href="buildimage.html" title="Buildimage">buildimage</a> command. 
</p>
<pre>&gt;&gt; myimage = imread('EchoRidgeClouds.jpeg'); 
&gt;&gt; myimage = buildimage(myimage ,[1 2], 1, 'myNewImage') 
myimage =  
       name: myNewImage 
       type: image 
     author:  
       date: 03-Oct-2005 10:31:03 
    moddate: 03-Oct-2005 10:31:03 
       data: 393216x3 [double] 
  imagesize: 768x512 
  imagemode: 1 
      label: {2x1} [array (char)] 
               Mode 1  [: ]  
               Mode 2  [: ]  
axisscale: {2x1} [vector (real)] 
... </pre>
<p>What if you have an existing DSO with image data in it? Use the exact same command: 
</p>
 <pre>&gt;&gt; myimage = buildimage(mydso ,[1 2], 1, 'myNewImage') </pre>
<p>The last input to <tt>buildimage</tt>, <tt>'myNewImage'</tt>, renames the dataset (the default name is 
the variable name). The default setting for <tt>buildimage</tt> is to handle 3 dimensional data 
(three modes), see the documentation for specific settings.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Concatenating_Images">Concatenating Images</span></h2>
<p><a href="cat_img.html" title="Cat img"> Concatenating images</a> can be performed, <a href="cat_img_gui.html" title="Cat img gui"> via Image Manager</a>, in either the image (X,Y pixel or spatial) domain or the variable (spectral) domain. In the spatial domain images can be concatenated in the X direction, Y direction, Z direction, or "tiled" in X/Y plane. Concatenation in the variable domain is almost always done in the "existing" variable mode (dimension). If concatenating in a new variable mode this will effectively create n-way data where data will be unfolded on the spatial modes but retain the variable modes.
</p><p><b>NOTE</b>: If images are concatenated in the Z direction this results in a 4 dimensional dataset that is pixels by pixels by pixels by variable. This is often confused with concatenating in the existing variable dimension where each image is "stacked" in the variable dimension.
</p><p><b>NOTE</b>: When concatenating in image (spatial) domain, a new class set will be created with each (sub) image assigned to a class. This will allow for class based preprocessing (e.g., <a href="advanced_preprocessing__variable_centering.html#Class_Centering" title="Advanced Preprocessing: Variable Centering"> class centering</a> to remove offset).
</p>
<h3><span class="mw-headline" id="Visual_explanation_of_Image_Domain_Concatenation">Visual explanation of Image Domain Concatenation</span></h3>
<p><a href="" class="image"><img alt="ImageDomainConcatenation.jpg" src="600px_imagedomainconcatenation.jpg" decoding="async" width="600" height="389" /></a>
</p><p><br />
</p>
<h3><span class="mw-headline" id="Visual_explanation_of_Variable_Domain_Concatenation">Visual explanation of Variable Domain Concatenation</span></h3>
<p><a href="" class="image"><img alt="VariableDomainConcatenation.jpg" src="600px_variabledomainconcatenation.jpg" decoding="async" width="600" height="394" /></a>
</p>
<!-- 
NewPP limit report
Cached time: 20240930205502
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.031 seconds
Real time usage: 0.039 seconds
Preprocessor visited node count: 63/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 1143/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key newwiki_eigenvector_com:pcache:idhash:518-0!canonical and timestamp 20240930205502 and revision id 11052.
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://www.wiki.eigenvector.com/index.php?title=Constructing_Image_DataSets&amp;oldid=11052">https://www.wiki.eigenvector.com/index.php?title=Constructing_Image_DataSets&amp;oldid=11052</a>"</div></div>
		<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		

<nav id="p-personal" class="vector-menu mw-portlet mw-portlet-personal vector-user-menu-legacy" aria-labelledby="p-personal-label" role="navigation"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			

<nav id="p-namespaces" class="vector-menu mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-namespaces-label" role="navigation"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			

<nav id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	/>
	<label
		id="p-variants-label"
		 aria-label="Change language variant"
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			

<nav id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-views-label" role="navigation"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href=""><span>Read</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	/>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			

		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="main_page.html"
			title="Visit the main page"></a>
	</div>
	

<nav id="p-navigation" class="vector-menu mw-portlet mw-portlet-navigation vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Main-Page" class="mw-list-item"><a href="main_page.html"><span>Main Page</span></a></li><li id="n-PLS_Toolbox/Solo" class="mw-list-item"><a href="software_user_guide.html"><span>PLS_Toolbox/Solo</span></a></li><li id="n-MIA_Toolbox/Solo+MIA" class="mw-list-item"><a href="mia_toolbox_user_guide.html"><span>MIA_Toolbox/Solo+MIA</span></a></li><li id="n-Solo_Predictor" class="mw-list-item"><a href="solo_predictor_user_guide.html"><span>Solo_Predictor</span></a></li><li id="n-Model_Exporter" class="mw-list-item"><a href="model_exporter_user_guide.html"><span>Model_Exporter</span></a></li><li id="n-DataSet-Object" class="mw-list-item"><a href="dataset_object.html"><span>DataSet Object</span></a></li><li id="n-Frequently-Asked-Questions" class="mw-list-item"><a href="evri_faq.html"><span>Frequently Asked Questions</span></a></li><li id="n-Eigenvector-Homepage" class="mw-list-item"><a href="http://www.eigenvector.com/" rel="nofollow"><span>Eigenvector Homepage</span></a></li><li id="n-MediaWiki-Help" class="mw-list-item"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents"><span>MediaWiki Help</span></a></li></ul>
		
	</div>
</nav>

	

<nav id="p-tb" class="vector-menu mw-portlet mw-portlet-tb vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="" title="More information about this page"><span>Page information</span></a></li></ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 22 May 2020, at 10:28.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="eigenvector_research_documentation_wiki_privacy_policy.html">Privacy policy</a></li>
	<li id="footer-places-about"><a href="eigenvector_research_documentation_wiki_about.html">About Eigenvector Research Documentation Wiki</a></li>
	<li id="footer-places-disclaimer"><a href="eigenvector_research_documentation_wiki_general_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></li>
</ul>

</footer>


<br/></body>
</html>