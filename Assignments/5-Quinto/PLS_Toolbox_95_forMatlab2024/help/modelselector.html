<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Modelselector - Eigenvector Research Documentation Wiki</title>



    <link rel="stylesheet" href="load.css" media="screen" />        
  

<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href=""/>
<meta name="generator" content="MediaWiki 1.39.6"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="viewport" content="width=1000"/>
<link rel="icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Eigenvector Research Documentation Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://www.wiki.eigenvector.com/api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="Eigenvector Research Documentation Wiki Atom feed" href=""/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Modelselector rootpage-Modelselector skin-vector action-view skin-vector-legacy vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading"><a href="https://wiki.eigenvector.com/index.php?title=Modelselector"><span class="mw-page-title-main">Modelselector</span></a></h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Eigenvector Research Documentation Wiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Purpose"><span class="tocnumber">1</span> <span class="toctext">Purpose</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Synopsis"><span class="tocnumber">2</span> <span class="toctext">Synopsis</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Description"><span class="tocnumber">3</span> <span class="toctext">Description</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Trigger_Models"><span class="tocnumber">3.1</span> <span class="toctext">Trigger Models</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Target_Models_and_Objects"><span class="tocnumber">3.2</span> <span class="toctext">Target Models and Objects</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Applying_Models"><span class="tocnumber">3.3</span> <span class="toctext">Applying Models</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Options"><span class="tocnumber">4</span> <span class="toctext">Options</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#See_Also"><span class="tocnumber">5</span> <span class="toctext">See Also</span></a></li>
</ul>
</div>

<h3><span class="mw-headline" id="Purpose">Purpose</span></h3>
<p>Create or apply a Model Selector model.
</p>
<h3><span class="mw-headline" id="Synopsis">Synopsis</span></h3>
<dl><dd>model = modelselector(triggermodel,target_1,target_2,...,target_default);</dd>
<dd>[target_model,applymodel] = modelselector(data,model)</dd>
<dd>modelselector&#160;% Launches the modelselector tool</dd></dl>
<p>Please note that the recommended way to build a Model Selector model from the command line is to use the Model Object. Please see <a href="evrimodel_objects.html" title="EVRIModel Objects"> this wiki page on building models using the Model Object</a>. 
</p>
<h3><span class="mw-headline" id="Description">Description</span></h3>
<p>A Model Selector Model is a special model type which, when applied to new data, selects between two or more "target" models or outputs (a.k.a. end-point nodes) based on a "trigger" model (a.k.a. rule or decision node). These models are used to implement discrete local models when a single global model is not sufficient for all possible scenarios. 
</p><p>For example, if a single PCA or PLS model does not perform sufficiently for all operating conditions but the operating conditions can be split into two or more easier-to-model subsets, a selector model can be used to choose between these subset models when applying the models to new data.
</p><p>Selector models consist of a trigger model (trigger) which can be a classification model or a set of one or more logical test strings to test the raw data or output of a regression or decomposition model and a set of two or more target models (target_1, target_2, etc) which can be any type of standard model structure, any standard object, or an empty array [ ] to indicate a null model.
</p><p>Model Selector models can also be created using the graphical <a href="hierarchical_model_builder.html" title="Hierarchical Model Builder">Hierarchical Model Builder</a> interface.
</p>
<h4><span class="mw-headline" id="Trigger_Models">Trigger Models</span></h4>
<p>Trigger models define the decision/rule nodes. Guidelines and rules for trigger models:
</p>
<ul><li>(A) A classification trigger model can be created using the standard classification modeling functions (PLSDA, KNN, SIMCA, SVMDA.) The model should be built with data representative of the sample types to which each target model can be applied. The number of classes separated by the model dictates the number of target models which can be selected from. The target models should be in the same order as the numerical class numbers used when building the model (e.g. if classes 1, 2 and 3 are used in PLSDA, the target models should be ordered so that target_1 is appropriate if the PLSDA model finds that a sample is class 1, target_2 is for class 2, and target_3 is for class 3.) A special case for PLSDA is that an "otherwise" model can be included which will be selected if the Q and T^2 values of the prediction are not within the limits specified by the qtestlimit and t2testlimit options.</li></ul>
<ul><li>(B) Logical test strings are specified as a trigger model by passing a cell containing one or more strings which perform a logical test on a variable from the data set. Variables are specified using either a label in double quotes (e.g. "flowrate"), or a axisscale value in quotes and square brackets (e.g. "[1530]"). The varaible can be used in any interpretable Matlab expression (including function calls) that returns a logical result. The simplest test could involve one of the Matlab logical comparison operators ( &lt;  &gt;  &lt;=  &gt;=  ==  and \~= ) and a value to which the given variable should be compared. For example, the target model:</li></ul>
<dl><dd><pre>{'"Fe"&gt;1100' '"Fe"&lt;500'}</pre></dd></dl>
<dl><dd>tests if the variable named "Fe" is greater than 1100. If true, the target_1 model is applied, if not true, "Fe" is tested for being less than 500, and if so, target_2 is selected. If neither test is true, the "default" target model (i.e. target_3) is selected.</dd></dl>
<dl><dd>Example 2:</dd></dl>
<dl><dd><pre>{'"[1745.3]"&lt;=500'}</pre></dd></dl>
<dl><dd>tests if variable 1745.3 (on the variable axiscale) is less than or equal to 500. If true, target_1 is selected, if not true, default target model is selected. If variable 1745.3 does not exist, it is interpolated from the provided data.</dd></dl>
<ul><li>(C) Logical test strings to be applied to the prediction from a simple regression (e.g. PLS, MLR, etc) or decomposition (e.g. PCA) model. When passed in this format, the first item in the cell array is a model to be applied to the data followed by a sequence of one or more logical tests to be performed on the predictions from the model application. The format of the logical tests is the same as in case (B) above EXCEPT any axisscale reference will be used to index into either the predicted values (for regression models) or the scores (for a decomposition model). For example, a test string of '"[2]"&gt;0.3' for a PLS trigger model would indicate that the second predicted y-value should be tested for being &gt; 0.3. The tests will be performed on the predictions from the model.</li></ul>
<dl><dd>Example 1:</dd>
<dd><pre>{ regmodel '"[1]"&lt;10' '"[1]"&lt;100' }</pre></dd>
<dd>applies "regmodel" to the data then tests the predicted values against the tests &lt;10 and &lt;100 for a total of three classes. If the predicted value is &lt;10, the first target model is selected. If it is &lt;100, the second target model is selected. Otherwise, the third (default) model is selected. Note that this method can not generally be used on classification models. Instead, the (A) form of trigger models should be used.</dd>
<dd>Normally, the "label" form of the test strings is not valid for prediction and decomposition trigger models. However, two special cases are "Q" and "T2" which, if used in a test string, will test the Q and Hotelling's T^2 values output by the model. Note that, if the model type does not have Q or T^2 values (SVM model, for example) a test including Q or T2 will throw an error.</dd></dl>
<h4><span class="mw-headline" id="Target_Models_and_Objects">Target Models and Objects</span></h4>
<p>Target models and objects define end-point nodes for each branch of the modelselector tree. When creating a selector model, there must be at least as many targets passed as there are classes (when trigger is a classification model) or strings (when trigger is a cell of logical test strings). There may also be an additional target (i.e. the "default") which is used if none of the classes or tests were positive.
</p><p>Note that target objects may be any standard model including another selector model (thus allowing multi-layer selector trees) or standard object including strings, numerical arrays, DataSet objects or even structures or cells.
</p><p>If a target is a model, the output of modelselector will be the result of applying the model to the input data (see also the 'applytarget' option which disables this behavior). If the target is not a model, the target object itself will be returned.
</p><p>One special target object is the "error" object. This object consists of a simple structure with one field named "error" which contains a string which should be used to throw an error. If the given target is selected, modelselector will throw a runtime error with the given string. This is useful in conjunction with on-line systems which should cease execution and send an alarm to a control system when the given situation occurs. This behavior can be changed by modifying the "errors" option (see below.)
</p>
<h4><span class="mw-headline" id="Applying_Models">Applying Models</span></h4>
<p>When a single row of new data is passed as a dataset along with the selector model itself. the output is the result of applying the selected target model (target_model) or the target object, along with a unique description of the "branch(s)" taken to select the target model as a vector of branch numbers (applymodel). For example, given a multi-layer selector model containing:
</p>
<pre>selector_model  -&gt; target_1 = PCA_model_A1
                   target_2 = Selector_model -&gt; target_1 = PCA_model_B1
                                                target_2 = PCA_model_B2 
                   target_3 = PCA_model_A2</pre>
<p>a returned value for applymodel of [2 1] implies that the second target model was selected from the first layer of target models, and this model was another selector model. From that second selector model, the first target model (PCA_model_B1) was selected and that is what was returned.
</p><p>If more than one row of new data is passed to modelselector, each row will be predicted and the output will be either a cell array of objects (prediction structures, strings) or a dataset with one row for each input row (when numerical values are output or numerical prediction results are extracted using outputfilters option)
</p><p>Note that if there are multiple "branches" (trigger models) the data passed to modelselector must contain all the data necessary for all trigger models within the selector model. If some of those variables are not used by a given model, modelselector will automatically discard unneeded variables before applying each trigger model.
</p>
<h3><span class="mw-headline" id="Options">Options</span></h3>
<p>options = a structure array with the following fields:
</p>
<ul><li><b>multiple</b>&#160;: [{'otherwise'} | 'mostprobable' | 'fail' ] Governs behavior when more than one class of a classification model is assigned. 'fail' will throw an error. 'mostprobable' will choose the target that corresponds to the most probable class. 'otherwise' will use the last target (otherwise.)</li>
<li><b>outputfilters</b>&#160;: {} Provides information on how to filter output results after selection of a target. The value of this option is stored in the model indicating how the output of each corresponding target should be indexed. It is a cell array equal in length to the number of targets. Each cell element can contain another cell array with one or more of the following:</li></ul>
<dl><dd><dl><dd>(A) a standard subscript indexing as defined by the Matlab "substruct" command</dd>
<dd>(B) a 2-element cell array containing a string label in the first cell and a standard substruct indexing structure in the second cell (as with A above)</dd>
<dd>(C) a string or numerical constant to be included verbatim Each content of the cell(to be concatenated row-wise). If any top-level cell elements are missing or the corresponding element is empty, no filtering is done.</dd></dl></dd></dl>
<pre>         EXAMPLE:
         {
           { {'my prediction' substruct('.','prediction')} {'Q residuals' substruct('.','Q')} }
           { {'my prediction' substruct('.','prediction')} {'Q residuals' [0] }
           { }
         }
</pre>
<dl><dd><dl><dd>Would grab the "prediction" and "Q" outputs from a model for the first target and would grab only the "prediction" field for the second target and add a 0 (zero) to that. No filtering would be done on the third target. The odd use of [0] in row 2 is useful because some models may not output Q residuals, but you might still want to always output a second value so predictions from the first model and the second model are extracted to form an identical output (two columns.)</dd></dl></dd></dl>
<ul><li><b>applytarget</b>&#160;: [ 'off' |{'on'}] When 'on' any target that is a model is automatically applied to the data. Note that modelselector models are ALWAYS automatically applied to the data.</li>
<li><b>errors</b>&#160;: [{'throw'}| 'struct' | 'string' ] Governs handling of error targets (structure with field "error" and a string). If 'throw', the content of the error field is thrown as an error. If 'string' the string content of the error field is returned with a prefix of "ERROR: ". If 'struct' the entire error structure is returned.</li>
<li><b>qtestlimit</b>&#160;: [3] Governs Q limit testing for PLSDA models (over this reduced value = otherwise branch is used)</li>
<li><b>t2testlimit</b>&#160;: [3] Governs T2 limit testing for PLSDA models (over this reduced value = otherwise branch is used)</li>
<li><b>addtrigmodels</b>&#160;: [{'trendtool'}] Specifies which models (other than standard) are allowed as trigger models. This option is mostly for future use as new methods are added which may be usable as trigger models.</li></ul>
<ul><li><b>waitbar</b>&#160;: [{'off'} | 'on'] Governs display of waitbar while processing.</li></ul>
<h3><span class="mw-headline" id="See_Also">See Also</span></h3>
<p><a href="hierarchical_model_builder.html" title="Hierarchical Model Builder">Hierarchical Model Builder</a>, <a href="knn.html" title="Knn">knn</a>, <a href="lwrpred.html" title="Lwrpred">lwrpred</a>, <a href="plsda.html" title="Plsda">plsda</a>, <a href="simca.html" title="Simca">simca</a>, <a href="svmda.html" title="Svmda">svmda</a>, <a href="evrimodel_objects.html" title="EVRIModel Objects">EVRIModel_Objects</a>
</p>
<!-- 
NewPP limit report
Cached time: 20240930015430
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.010 seconds
Real time usage: 0.013 seconds
Preprocessor visited node count: 50/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 615/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key newwiki_eigenvector_com:pcache:idhash:154-0!canonical and timestamp 20240930015430 and revision id 10979.
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://www.wiki.eigenvector.com/index.php?title=Modelselector&amp;oldid=10979">https://www.wiki.eigenvector.com/index.php?title=Modelselector&amp;oldid=10979</a>"</div></div>
		<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		

<nav id="p-personal" class="vector-menu mw-portlet mw-portlet-personal vector-user-menu-legacy" aria-labelledby="p-personal-label" role="navigation"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			

<nav id="p-namespaces" class="vector-menu mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-namespaces-label" role="navigation"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			

<nav id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	/>
	<label
		id="p-variants-label"
		 aria-label="Change language variant"
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			

<nav id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-views-label" role="navigation"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href=""><span>Read</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	/>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			

		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="main_page.html"
			title="Visit the main page"></a>
	</div>
	

<nav id="p-navigation" class="vector-menu mw-portlet mw-portlet-navigation vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Main-Page" class="mw-list-item"><a href="main_page.html"><span>Main Page</span></a></li><li id="n-PLS_Toolbox/Solo" class="mw-list-item"><a href="software_user_guide.html"><span>PLS_Toolbox/Solo</span></a></li><li id="n-MIA_Toolbox/Solo+MIA" class="mw-list-item"><a href="mia_toolbox_user_guide.html"><span>MIA_Toolbox/Solo+MIA</span></a></li><li id="n-Solo_Predictor" class="mw-list-item"><a href="solo_predictor_user_guide.html"><span>Solo_Predictor</span></a></li><li id="n-Model_Exporter" class="mw-list-item"><a href="model_exporter_user_guide.html"><span>Model_Exporter</span></a></li><li id="n-DataSet-Object" class="mw-list-item"><a href="dataset_object.html"><span>DataSet Object</span></a></li><li id="n-Frequently-Asked-Questions" class="mw-list-item"><a href="evri_faq.html"><span>Frequently Asked Questions</span></a></li><li id="n-Eigenvector-Homepage" class="mw-list-item"><a href="http://www.eigenvector.com/" rel="nofollow"><span>Eigenvector Homepage</span></a></li><li id="n-MediaWiki-Help" class="mw-list-item"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents"><span>MediaWiki Help</span></a></li></ul>
		
	</div>
</nav>

	

<nav id="p-tb" class="vector-menu mw-portlet mw-portlet-tb vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="" title="More information about this page"><span>Page information</span></a></li></ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 3 January 2020, at 15:21.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="eigenvector_research_documentation_wiki_privacy_policy.html">Privacy policy</a></li>
	<li id="footer-places-about"><a href="eigenvector_research_documentation_wiki_about.html">About Eigenvector Research Documentation Wiki</a></li>
	<li id="footer-places-disclaimer"><a href="eigenvector_research_documentation_wiki_general_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></li>
</ul>

</footer>


<br/></body>
</html>